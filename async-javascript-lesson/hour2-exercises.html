<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hour 2 Exercises - Async/Await & APIs</title>
    <!-- Prism.js CSS for syntax highlighting -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet">
    
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
            background-color: #f8f9fa;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #2c3e50;
            text-align: center;
            border-bottom: 3px solid #28a745;
            padding-bottom: 10px;
        }
        .exercise {
            background: #f8f9fa;
            border-left: 4px solid #28a745;
            padding: 20px;
            margin: 20px 0;
            border-radius: 0 8px 8px 0;
        }
        .exercise h3 {
            color: #155724;
            margin-top: 0;
        }
        .question {
            background: #fff3cd;
            padding: 15px;
            margin: 10px 0;
            border-radius: 5px;
            border-left: 4px solid #ffc107;
        }
        .coding-exercise {
            background: #e8f4f8;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
            border-left: 4px solid #17a2b8;
        }
        .api-exercise {
            background: #e2e3ff;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
            border-left: 4px solid #6f42c1;
        }
        code:not([class*="language-"]) {
            background: #f4f4f4;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
            color: #e74c3c;
        }
        pre[class*="language-"] {
            margin: 10px 0;
            border-radius: 8px;
            font-size: 14px;
        }
        .instructions {
            background: #d4edda;
            padding: 15px;
            border-radius: 5px;
            border-left: 4px solid #28a745;
            margin-bottom: 20px;
        }
        .difficulty {
            display: inline-block;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 0.8em;
            font-weight: bold;
            margin-bottom: 10px;
        }
        .easy { background: #d4edda; color: #155724; }
        .medium { background: #fff3cd; color: #856404; }
        .hard { background: #f8d7da; color: #721c24; }
        .api-note {
            background: #d1ecf1;
            padding: 10px;
            border-radius: 5px;
            border-left: 4px solid #17a2b8;
            margin: 10px 0;
            font-size: 0.9em;
        }
        .work-instruction {
            background: #e2e3ff;
            padding: 12px;
            border-radius: 5px;
            border-left: 4px solid #6f42c1;
            margin: 10px 0;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>‚ö° Hour 2 Exercises: Async/Await & API Mastery</h1>
        
        <div class="instructions">
            <h3>üìã Instructions</h3>
            <p><strong>Time:</strong> 45 minutes | <strong>Format:</strong> Individual work, then pair programming</p>
            <ul>
                <li>Work on your own computer - internet connection required for real APIs</li>
                <li>Copy code examples from this page into your browser console (F12)</li>
                <li>Use async/await syntax for all solutions</li>
                <li>Focus on error handling and user experience</li>
                <li>Help your neighbors when you finish early!</li>
            </ul>
        </div>

        <div class="exercise">
            <div class="difficulty easy">EASY</div>
            <h3>Exercise 1: Promise to Async/Await Conversion</h3>
            <div class="question">
                <p><strong>Task:</strong> Convert this promise chain to async/await syntax!</p>
                <pre><code class="language-javascript">// üîÑ Promise version (convert this to async/await)
function fetchUserData(userId) {
    return fetch(`https://jsonplaceholder.typicode.com/users/${userId}`)
        .then(response => {
            if (!response.ok) {
                throw new Error('User not found');
            }
            return response.json();
        })
        .then(user => {
            console.log('User:', user.name);
            return fetch(`https://jsonplaceholder.typicode.com/posts?userId=${user.id}`);
        })
        .then(response => response.json())
        .then(posts => {
            console.log('Posts count:', posts.length);
            return { user: user, posts: posts };
        })
        .catch(error => {
            console.log('Error:', error.message);
        });
}

// ‚úÖ Async/await version (your solution):
async function fetchUserDataAsync(userId) {
    try {
        const userResponse = await fetch(`https://jsonplaceholder.typicode.com/users/${userId}`);
        
        if (!userResponse.ok) {
            throw new Error('User not found');
        }
        
        const user = await userResponse.json();
        console.log('User:', user.name);
        
        const postsResponse = await fetch(`https://jsonplaceholder.typicode.com/posts?userId=${user.id}`);
        const posts = await postsResponse.json();
        
        console.log('Posts count:', posts.length);
        return { user, posts };
        
    } catch (error) {
        console.log('Error:', error.message);
    }
}

// Test both versions
// fetchUserData(1);
// fetchUserDataAsync(1);</code></pre>
                <div class="work-instruction">
                    üíª <strong>On your computer:</strong> Compare both versions - notice how async/await eliminates the .then() chain!
                </div>
            </div>
        </div>

        <div class="exercise">
            <div class="difficulty easy">EASY</div>
            <h3>Exercise 2: Your First API Call</h3>
            <div class="api-exercise">
                <p><strong>Task:</strong> Fetch a random joke from an API and display it nicely!</p>
                <div class="api-note">
                    <strong>API:</strong> https://official-joke-api.appspot.com/random_joke
                </div>
                <p><strong>Requirements:</strong></p>
                <ul>
                    <li>Use async/await syntax</li>
                    <li>Handle network errors gracefully</li>
                    <li>Display both the setup and punchline</li>
                    <li>Add a fun emoji to the output</li>
                </ul>
                <pre><code class="language-javascript">async function getRandomJoke() {
    try {
        console.log("üòÇ Fetching a random joke...");
        
        const response = await fetch('https://official-joke-api.appspot.com/random_joke');
        
        if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
        }
        
        const joke = await response.json();
        
        // Display the joke nicely
        console.log(`\nüé§ ${joke.setup}`);
        console.log(`ü§£ ${joke.punchline}`);
        console.log(`üè∑Ô∏è Type: ${joke.type}\n`);
        
        return joke;
        
    } catch (error) {
        console.log("‚ùå Failed to get joke:", error.message);
        // Fallback joke
        console.log("ü§£ Fallback joke: Why don't scientists trust atoms? Because they make up everything!");
    }
}

// Test your function
getRandomJoke();</code></pre>
                <div class="work-instruction">
                    üíª <strong>On your computer:</strong> Run this function multiple times to get different jokes!
                </div>
            </div>
        </div>

        <div class="exercise">
            <div class="difficulty medium">MEDIUM</div>
            <h3>Exercise 3: Weather Dashboard</h3>
            <div class="api-exercise">
                <p><strong>Task:</strong> Create a weather information display using multiple API calls!</p>
                <div class="api-note">
                    <strong>APIs to use:</strong><br>
                    ‚Ä¢ IP Location: http://ip-api.com/json/<br>
                    ‚Ä¢ Weather: https://wttr.in/[location]?format=j1<br>
                    ‚Ä¢ Fun Fact: https://uselessfacts.jsph.pl/random.json?language=en
                </div>
                <p><strong>Steps:</strong></p>
                <ol>
                    <li>Get user's location from their IP</li>
                    <li>Fetch weather data for that location</li>
                    <li>Get a random fun fact to make it interesting</li>
                    <li>Display everything in a nice format</li>
                </ol>
                <div class="code-block">
async function createWeatherDashboard() {
    try {
        // Step 1: Get location
        
        // Step 2: Get weather
        
        // Step 3: Get fun fact
        
        // Step 4: Display results
        
    } catch (error) {
        console.log("Dashboard failed:", error.message);
    }
}

createWeatherDashboard();
                </div>
            </div>
        </div>

        <div class="exercise">
            <div class="difficulty medium">MEDIUM</div>
            <h3>Exercise 4: Parallel API Racing</h3>
            <div class="coding-exercise">
                <p><strong>Task:</strong> Compare different ways of handling multiple API calls!</p>
                <p><strong>Test these three approaches:</strong></p>
                <ol>
                    <li><strong>Sequential:</strong> Wait for each API one by one</li>
                    <li><strong>Parallel:</strong> Start all APIs at once with Promise.all()</li>
                    <li><strong>Race:</strong> Use the fastest API with Promise.race()</li>
                </ol>
                <div class="code-block">
// API endpoints for testing
const apis = {
    joke: 'https://official-joke-api.appspot.com/random_joke',
    quote: 'https://api.quotable.io/random',
    fact: 'https://uselessfacts.jsph.pl/random.json?language=en'
};

// 1. Sequential approach
async function fetchSequential() {
    console.time('Sequential');
    // Your code here
    console.timeEnd('Sequential');
}

// 2. Parallel approach
async function fetchParallel() {
    console.time('Parallel');
    // Your code here
    console.timeEnd('Parallel');
}

// 3. Race approach
async function fetchRace() {
    console.time('Race');
    // Your code here
    console.timeEnd('Race');
}

// Test all three approaches
async function testAllApproaches() {
    await fetchSequential();
    await fetchParallel();
    await fetchRace();
}
                </div>
                <p><strong>Questions to answer:</strong></p>
                <ul>
                    <li>Which approach is fastest and why?</li>
                    <li>When would you use each approach in real applications?</li>
                    <li>What happens if one API fails in each approach?</li>
                </ul>
            </div>
        </div>

        <div class="exercise">
            <div class="difficulty hard">HARD</div>
            <h3>Exercise 5: Pokemon Team Builder</h3>
            <div class="api-exercise">
                <p><strong>Challenge:</strong> Build the ultimate Pokemon team using the Pokemon API!</p>
                <div class="api-note">
                    <strong>API:</strong> https://pokeapi.co/api/v2/pokemon/[name-or-id]
                </div>
                <p><strong>Requirements:</strong></p>
                <ul>
                    <li>Let user choose 3 Pokemon (or pick random ones)</li>
                    <li>Fetch data for all Pokemon in parallel</li>
                    <li>Calculate total team stats (HP, Attack, Defense)</li>
                    <li>Handle invalid Pokemon names gracefully</li>
                    <li>Display team with types, abilities, and stats</li>
                </ul>
                <p><strong>Bonus Challenges:</strong></p>
                <ul>
                    <li>Add type effectiveness calculations</li>
                    <li>Find the strongest/weakest team member</li>
                    <li>Recommend team improvements</li>
                </ul>
                <div class="code-block">
async function buildPokemonTeam(pokemonNames) {
    // Example: ['pikachu', 'charizard', 'blastoise']
    
    try {
        // Your team building logic here
        
    } catch (error) {
        console.log("Team building failed:", error.message);
    }
}

// Test with different teams
buildPokemonTeam(['pikachu', 'charizard', 'blastoise']);
buildPokemonTeam(['ditto', 'mew', 'mewtwo']);
                </div>
            </div>
        </div>

        <div class="exercise">
            <div class="difficulty medium">MEDIUM</div>
            <h3>Exercise 6: Error Handling Master Class</h3>
            <div class="coding-exercise">
                <p><strong>Task:</strong> Create a robust API function that handles ALL possible errors!</p>
                <p><strong>Error scenarios to handle:</strong></p>
                <ul>
                    <li>Network is offline</li>
                    <li>API returns 404 (not found)</li>
                    <li>API returns 500 (server error)</li>
                    <li>Response is not valid JSON</li>
                    <li>API is too slow (timeout)</li>
                </ul>
                <div class="code-block">
async function robustAPICall(url, options = {}) {
    const {
        timeout = 5000,
        retries = 3,
        fallbackData = null
    } = options;
    
    // Your bulletproof API function here
    // Handle all error cases gracefully
    // Implement retry logic with exponential backoff
    // Return meaningful error messages
}

// Test with different scenarios
async function testErrorHandling() {
    // Test successful call
    await robustAPICall('https://api.quotable.io/random');
    
    // Test 404 error
    await robustAPICall('https://api.quotable.io/nonexistent');
    
    // Test invalid URL
    await robustAPICall('https://invalid-url-that-does-not-exist.com');
    
    // Test with fallback data
    await robustAPICall('https://invalid-url.com', {
        fallbackData: { quote: "Offline quote", author: "Cache" }
    });
}
                </div>
            </div>
        </div>

        <div class="exercise">
            <div class="difficulty hard">HARD</div>
            <h3>Exercise 7: Dynamic Content Generator</h3>
            <div class="api-exercise">
                <p><strong>Challenge:</strong> Build a content generator that adapts to API failures!</p>
                <p><strong>Goal:</strong> Always provide interesting content, even if some APIs fail</p>
                <div class="code-block">
const contentSources = {
    motivation: 'https://api.quotable.io/random?tags=motivational',
    humor: 'https://official-joke-api.appspot.com/random_joke',
    knowledge: 'https://uselessfacts.jsph.pl/random.json?language=en',
    image: 'https://picsum.photos/400/200',
    advice: 'https://api.adviceslip.com/advice'
};

async function generateDailyContent() {
    // Requirements:
    // 1. Try to fetch from all sources in parallel
    // 2. Handle partial failures gracefully
    // 3. Always return at least 2 types of content
    // 4. Create a beautiful formatted output
    // 5. Include timestamps and source attribution
    
    console.log("üåü Generating your daily content...");
    
    // Your intelligent content generation logic here
}

// Bonus: Create a content scheduler
async function scheduleContent(intervalMinutes = 5) {
    // Generate new content every few minutes
    // Handle rate limiting
    // Cache results to avoid spam
}
                </div>
            </div>
        </div>

        <div class="exercise">
            <div class="difficulty medium">MEDIUM</div>
            <h3>Exercise 8: API Response Time Monitor</h3>
            <div class="coding-exercise">
                <p><strong>Task:</strong> Build a tool to monitor and compare API response times!</p>
                <div class="code-block">
async function monitorAPI(apiUrl, tests = 5) {
    const results = [];
    
    console.log(`üîç Testing ${apiUrl} (${tests} times)...`);
    
    // Your monitoring logic here:
    // 1. Make multiple requests to the same API
    // 2. Measure response times
    // 3. Track success/failure rates
    // 4. Calculate statistics (min, max, average)
    // 5. Detect patterns or issues
    
    return results;
}

async function compareAPIs() {
    const apis = [
        'https://api.quotable.io/random',
        'https://official-joke-api.appspot.com/random_joke',
        'https://uselessfacts.jsph.pl/random.json?language=en'
    ];
    
    // Test all APIs and compare performance
    // Create a performance report
    // Recommend the most reliable API
}
                </div>
            </div>
        </div>

        <div class="exercise">
            <div class="difficulty hard">HARD</div>
            <h3>üèÜ Final Challenge: Multi-API Data Mashup</h3>
            <div class="api-exercise">
                <p><strong>Ultimate Challenge:</strong> Create an intelligent data dashboard!</p>
                <p><strong>The Mission:</strong> Build a "Daily Inspiration Dashboard" that combines multiple APIs intelligently</p>
                <p><strong>Features to implement:</strong></p>
                <ul>
                    <li><strong>Smart Fallbacks:</strong> If motivational quotes fail, use general quotes</li>
                    <li><strong>Content Correlation:</strong> Match images to quote themes</li>
                    <li><strong>Adaptive Layout:</strong> Adjust display based on available content</li>
                    <li><strong>Caching:</strong> Store successful responses to avoid redundant calls</li>
                    <li><strong>Analytics:</strong> Track which APIs are most/least reliable</li>
                    <li><strong>User Preferences:</strong> Let users choose content types</li>
                </ul>
                <div class="code-block">
class DashboardGenerator {
    constructor() {
        this.cache = new Map();
        this.apiStats = new Map();
        this.userPreferences = {
            includeMotivation: true,
            includeHumor: true,
            includeImages: true,
            includeFacts: true
        };
    }
    
    async generateDashboard() {
        // Your masterpiece implementation here!
        // This should be the culmination of all techniques learned
    }
    
    async fetchWithFallback(primaryAPI, fallbackAPI) {
        // Implement intelligent fallback logic
    }
    
    analyzeAPIPerformance() {
        // Track and report API reliability
    }
    
    formatDashboard(data) {
        // Create beautiful, adaptive output
    }
}

// Create and test your dashboard
const dashboard = new DashboardGenerator();
dashboard.generateDashboard();
                </div>
            </div>
        </div>

        <div class="instructions">
            <h3>üéØ Discussion Questions (After Exercises)</h3>
            <ul>
                <li>How does async/await make code more readable compared to promises?</li>
                <li>What strategies work best for handling API failures in production?</li>
                <li>When should you use parallel vs sequential API calls?</li>
                <li>How would you implement rate limiting for API calls?</li>
                <li>What security considerations are important when working with APIs?</li>
                <li>How do you balance performance vs reliability in async operations?</li>
            </ul>
            
            <h3>üöÄ Next Steps</h3>
            <ul>
                <li>Explore WebSockets for real-time data</li>
                <li>Learn about Service Workers for offline functionality</li>
                <li>Practice with GraphQL APIs</li>
                <li>Build a full project combining frontend and API integration</li>
                <li>Study advanced patterns like debouncing and throttling</li>
            </ul>
        </div>
    </div>

    <!-- Prism.js JavaScript for syntax highlighting -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    
    <script>
        // Utility functions for exercises
        console.log("‚ö° Hour 2 Exercises Loaded!");
        console.log("üåê API Testing Tools Available:");
        console.log("  ‚Ä¢ console.time() / console.timeEnd() for performance");
        console.log("  ‚Ä¢ try/catch for error handling");
        console.log("  ‚Ä¢ Promise.allSettled() for partial failures");
        console.log("üéÆ Ready for API adventures? Let's build something amazing!");
        
        // Helper function for students
        window.testAPI = async function(url) {
            try {
                console.time('API Call');
                const response = await fetch(url);
                console.timeEnd('API Call');
                console.log('Status:', response.status);
                const data = await response.json();
                console.log('Data:', data);
                return data;
            } catch (error) {
                console.log('Error:', error.message);
                return null;
            }
        };
        
        // Quick API tester for different response types
        window.quickTest = {
            joke: () => testAPI('https://official-joke-api.appspot.com/random_joke'),
            quote: () => testAPI('https://api.quotable.io/random'),
            fact: () => testAPI('https://uselessfacts.jsph.pl/random.json?language=en'),
            pokemon: (name = 'pikachu') => testAPI(`https://pokeapi.co/api/v2/pokemon/${name}`)
        };
        
        console.log("üí° Try: testAPI('https://api.quotable.io/random')");
        console.log("üöÄ Or: quickTest.joke(), quickTest.quote(), quickTest.pokemon('charizard')");
    </script>
</body>
</html>