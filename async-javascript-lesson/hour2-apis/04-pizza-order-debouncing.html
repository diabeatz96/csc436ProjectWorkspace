<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ• Pizza Order Debouncing - Visual Learning</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #FF6B6B, #FF8E53);
            min-height: 100vh;
            color: #333;
        }
        
        .container {
            background: white;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        
        h1 {
            text-align: center;
            color: #2c3e50;
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }
        
        .subtitle {
            text-align: center;
            color: #7f8c8d;
            font-size: 1.2em;
            margin-bottom: 30px;
        }
        
        .demo-section {
            background: linear-gradient(145deg, #f8f9fa, #e9ecef);
            padding: 25px;
            border-radius: 15px;
            margin: 30px 0;
            border-left: 6px solid #e74c3c;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
        }
        
        .pizza-order-demo {
            display: flex;
            gap: 30px;
            align-items: flex-start;
            margin: 30px 0;
        }
        
        .order-input-section {
            flex: 1;
            background: #fff;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }
        
        .order-input {
            width: 100%;
            padding: 15px 20px;
            font-size: 18px;
            border: 3px solid #e74c3c;
            border-radius: 25px;
            outline: none;
            transition: all 0.3s ease;
            font-family: inherit;
            box-sizing: border-box;
        }
        
        .order-input:focus {
            border-color: #c0392b;
            box-shadow: 0 0 20px rgba(231, 76, 60, 0.3);
            transform: translateY(-2px);
        }
        
        .kitchen-section {
            flex: 1;
            background: #fff;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            min-height: 200px;
        }
        
        .chef {
            font-size: 4em;
            text-align: center;
            margin: 20px 0;
            transition: transform 0.3s ease;
        }
        
        .chef.cooking {
            animation: cooking 0.5s ease-in-out infinite alternate;
        }
        
        @keyframes cooking {
            from { transform: rotate(-5deg) scale(1); }
            to { transform: rotate(5deg) scale(1.1); }
        }
        
        .order-queue {
            background: #ffeaa7;
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            border-left: 4px solid #fdcb6e;
            min-height: 50px;
        }
        
        .timer-display {
            background: #74b9ff;
            color: white;
            padding: 10px 20px;
            border-radius: 20px;
            text-align: center;
            font-weight: bold;
            margin: 10px 0;
            font-size: 1.1em;
            transition: all 0.3s ease;
        }
        
        .timer-display.active {
            animation: pulse 1s ease-in-out infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .api-calls-counter {
            background: linear-gradient(145deg, #00b894, #00a085);
            color: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            margin: 20px 0;
            font-size: 1.2em;
            font-weight: bold;
        }
        
        .comparison-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin: 30px 0;
        }
        
        .comparison-card {
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }
        
        .bad-way {
            background: linear-gradient(145deg, #ff7675, #fd79a8);
            color: white;
        }
        
        .good-way {
            background: linear-gradient(145deg, #00b894, #55a3ff);
            color: white;
        }
        
        .code-example {
            background: #1a1a1a;
            color: #ffffff;
            padding: 20px;
            border-radius: 10px;
            font-family: 'Fira Code', 'Courier New', monospace;
            font-size: 15px;
            line-height: 1.7;
            overflow-x: auto;
            margin: 15px 0;
            box-shadow: inset 0 0 10px rgba(0,0,0,0.3);
            font-weight: 500;
        }

        .code-example pre {
            margin: 0;
            color: #ffffff;
            background: transparent;
        }

        .code-example code {
            color: #ffffff !important;
            background: transparent;
            font-family: inherit;
            font-weight: 500;
        }
        
        .highlight {
            background: rgba(255, 255, 0, 0.3);
            padding: 2px 4px;
            border-radius: 3px;
        }
        
        .step-by-step {
            background: #f8f9ff;
            border: 2px solid #6c5ce7;
            border-radius: 15px;
            padding: 25px;
            margin: 25px 0;
        }
        
        .step {
            background: white;
            padding: 15px;
            margin: 10px 0;
            border-radius: 10px;
            border-left: 4px solid #6c5ce7;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        
        .typing-indicator {
            color: #74b9ff;
            font-size: 14px;
            margin-top: 10px;
            opacity: 0;
            transition: opacity 0.3s;
            font-style: italic;
        }
        
        .typing-indicator.show {
            opacity: 1;
        }
        
        .pizza-visualization {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        
        .pizza-slice {
            font-size: 2em;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .pizza-slice:hover {
            transform: scale(1.2) rotate(10deg);
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .stat-card {
            background: linear-gradient(145deg, #ffffff, #f0f0f0);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        
        .stat-number {
            font-size: 2em;
            font-weight: bold;
            color: #e74c3c;
        }
        
        .stat-label {
            color: #7f8c8d;
            font-size: 0.9em;
            margin-top: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ• Pizza Order Debouncing</h1>
        <p class="subtitle">Learn how debouncing prevents overwhelming Tony's Pizza Kitchen!</p>
        
        <div class="demo-section">
            <h3>ğŸ® Interactive Demo: Type Your Pizza Order</h3>
            <p>Try typing quickly and watch how debouncing saves the day!</p>
            
            <div class="pizza-order-demo">
                <div class="order-input-section">
                    <h4>ğŸ“ Customer Order</h4>
                    <input 
                        type="text" 
                        id="pizzaOrder" 
                        class="order-input" 
                        placeholder="Type your pizza order... (e.g., pepperoni)"
                    >
                    <div class="typing-indicator" id="typingIndicator">
                        ğŸ” Checking ingredients...
                    </div>
                    
                    <div class="api-calls-counter">
                        Kitchen Checks Made: <span id="apiCounter">0</span>
                    </div>
                    
                    <div class="timer-display" id="timerDisplay">
                        â±ï¸ Timer: Ready
                    </div>
                </div>
                
                <div class="kitchen-section">
                    <h4>ğŸ‘¨â€ğŸ³ Tony's Kitchen</h4>
                    <div class="chef" id="chef">ğŸ‘¨â€ğŸ³</div>
                    
                    <div class="order-queue">
                        <strong>Current Order Queue:</strong>
                        <div id="currentOrder">No orders yet...</div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="comparison-section">
            <div class="comparison-card bad-way">
                <h3>âŒ Without Debouncing</h3>
                <div class="pizza-visualization">
                    <span class="pizza-slice">ğŸ•</span>
                    <span class="pizza-slice">ğŸ•</span>
                    <span class="pizza-slice">ğŸ•</span>
                    <span class="pizza-slice">ğŸ•</span>
                    <span class="pizza-slice">ğŸ•</span>
                </div>
                <p><strong>Every keystroke = Kitchen check!</strong></p>
                <p>Type "pepperoni" = 9 kitchen interruptions!</p>
                <p>ğŸ˜° Poor Tony gets overwhelmed</p>
                <p>ğŸ“ˆ High server load</p>
            </div>
            
            <div class="comparison-card good-way">
                <h3>âœ… With Debouncing</h3>
                <div class="pizza-visualization">
                    <span class="pizza-slice">ğŸ•</span>
                </div>
                <p><strong>Wait 300ms after typing stops</strong></p>
                <p>Type "pepperoni" = 1 kitchen check!</p>
                <p>ğŸ˜Š Tony stays calm and focused</p>
                <p>ğŸ“‰ Low server load</p>
            </div>
        </div>
        
        <div class="step-by-step">
            <h3>ğŸ”§ How Pizza Order Debouncing Works</h3>
            
            <div class="step">
                <strong>Step 1: Customer starts typing</strong><br>
                User types "p" â†’ Timer starts (300ms countdown)
            </div>
            
            <div class="step">
                <strong>Step 2: More typing happens</strong><br>
                User types "e" â†’ Previous timer cancelled, new timer starts
            </div>
            
            <div class="step">
                <strong>Step 3: Keep typing...</strong><br>
                User types "p-p-e-r-o-n-i" â†’ Timer keeps getting cancelled and restarted
            </div>
            
            <div class="step">
                <strong>Step 4: Customer pauses</strong><br>
                300ms passes with no typing â†’ Kitchen check happens!
            </div>
            
            <div class="step">
                <strong>Step 5: Results delivered</strong><br>
                Tony checks ingredients once and responds with pizza options
            </div>
        </div>
        
        <div class="demo-section">
            <h3>ğŸ’» The Debounce Function Explained</h3>
            <div class="code-example">
                <div class="code-header">
                    <span>ğŸ•</span> pizza-debounce.js
                </div>
                <pre><code class="language-javascript">// ğŸ• The Magic Debounce Function
function debounce(func, delay) {
    let timeoutId;  // ğŸ“¦ Store the timer
    
    return (...args) => {
        clearTimeout(timeoutId);  // âŒ Cancel previous timer
        timeoutId = setTimeout(() => {
            func.apply(null, args);  // ğŸ¯ Call the function
        }, delay);  // â° After the delay
    };
}

// ğŸ• Usage in Pizza Shop
const checkIngredients = (orderText) => {
    console.log(`ğŸ‘¨â€ğŸ³ Tony checks: "${orderText}"`);
    // Make API call to check ingredient availability
};

const debouncedCheck = debounce(checkIngredients, 300);

// User typing triggers this:
pizzaInput.addEventListener('input', (e) => {
    debouncedCheck(e.target.value);
});</code></pre>
            </div>
        </div>
        
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-number" id="totalKeystrokes">0</div>
                <div class="stat-label">Total Keystrokes</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="actualChecks">0</div>
                <div class="stat-label">Actual Kitchen Checks</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="savedChecks">0</div>
                <div class="stat-label">Checks Saved</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="efficiency">0%</div>
                <div class="stat-label">Efficiency Gained</div>
            </div>
        </div>
        
        <div class="demo-section">
            <h3>ğŸ¯ Real-World Applications</h3>
            <ul style="font-size: 1.1em; line-height: 1.8;">
                <li>ğŸ” <strong>Search boxes</strong> - Don't search on every character</li>
                <li>ğŸ“ <strong>Window resize</strong> - Don't recalculate layout constantly</li>
                <li>ğŸ–±ï¸ <strong>Button clicks</strong> - Prevent accidental double-clicks</li>
                <li>ğŸ“œ <strong>Scroll events</strong> - Don't fire on every pixel scroll</li>
                <li>âœï¸ <strong>Auto-save</strong> - Save document after user stops typing</li>
                <li>ğŸ® <strong>Game controls</strong> - Prevent button mashing</li>
            </ul>
        </div>
        
        <div class="demo-section">
            <h3>ğŸ”¬ Debounce Function: Line-by-Line Breakdown</h3>
            <p>Let's dissect the debounce function to understand every concept and how it handles different numbers of arguments:</p>
            
            <div class="code-example">
                <div class="code-header">
                    <span>ğŸ”</span> Detailed Analysis - debounce-breakdown.js
                </div>
                <pre><code class="language-javascript">// ğŸ¯ LINE 1: Function declaration with parameters
function debounce(func, delay) {
    // func = the function we want to debounce
    // delay = how long to wait (in milliseconds)
    
    // ğŸ  LINE 2: Create a closure variable to store timer ID
    let timeoutId;  
    // This variable persists between function calls due to closure
    // It's like Tony's notepad to remember if he has a timer running
    
    // ğŸ LINE 3: Return a new function (this is what gets called repeatedly)
    return (...args) => {
        // ...args = "rest parameter" - collects ALL arguments into an array
        // Whether you pass 0, 1, 5, or 100 arguments, they all get collected!
        
        // âŒ LINE 4: Cancel any existing timer
        clearTimeout(timeoutId);  
        // Like erasing Tony's previous timer before starting a new one
        // This is the KEY to debouncing - we reset the countdown
        
        // â° LINE 5-7: Set a new timer
        timeoutId = setTimeout(() => {
            // This function runs ONLY after the delay expires
            func.apply(null, args);  // ğŸ¯ THE MAGIC LINE!
        }, delay);
    };
}</code></pre>
            </div>
        </div>
        
        <div class="demo-section">
            <h3>âš¡ The Magic of func.apply(null, args)</h3>
            <p>This line is the heart of how debounce handles any number of arguments:</p>
            
            <div class="code-example">
                <div class="code-header">
                    <span>âœ¨</span> Understanding func.apply()
                </div>
                <pre><code class="language-javascript">// ğŸ¯ What func.apply(null, args) does:
// - func = the original function we're debouncing
// - null = 'this' context (we don't need it here)
// - args = array of arguments collected by ...args

// ğŸ“ Example: Our pizza checking function
function checkKitchenIngredients(orderText) {
    console.log(`ğŸ‘¨â€ğŸ³ Tony checks: "${orderText}"`);
}

// ğŸ”§ When we create the debounced version:
const debouncedCheck = debounce(checkKitchenIngredients, 300);

// ğŸ® When we call it:
debouncedCheck("pepperoni pizza");

// ğŸ“‹ Here's what happens step by step:
// 1. debouncedCheck gets called with "pepperoni pizza"
// 2. ...args collects this into: ["pepperoni pizza"]
// 3. clearTimeout(timeoutId) cancels any existing timer
// 4. setTimeout creates new timer for 300ms
// 5. After 300ms: func.apply(null, ["pepperoni pizza"])
// 6. This is equivalent to: checkKitchenIngredients("pepperoni pizza")</code></pre>
            </div>
        </div>
        
        <div class="demo-section">
            <h3>ğŸ¤” Why Does This Work With Different Argument Counts?</h3>
            
            <div class="code-example">
                <div class="code-header">
                    <span>ğŸ§©</span> Flexible Arguments Demo
                </div>
                <pre><code class="language-javascript">// ğŸ• Function that takes 2 arguments
function orderPizza(type, size) {
    console.log(`Ordering ${size} ${type} pizza`);
}

// ğŸ”§ Debounced version (same debounce function!)
const debouncedOrder = debounce(orderPizza, 300);

// âœ… Calling with 2 arguments:
debouncedOrder("pepperoni", "large");
// args becomes: ["pepperoni", "large"]
// After 300ms: orderPizza.apply(null, ["pepperoni", "large"])
// Which calls: orderPizza("pepperoni", "large")

// âœ… Calling with 1 argument:
debouncedOrder("margherita");
// args becomes: ["margherita"]  
// After 300ms: orderPizza.apply(null, ["margherita"])
// Which calls: orderPizza("margherita", undefined)
// The 'size' parameter gets undefined, which is fine!

// âœ… Even with NO arguments:
debouncedOrder();
// args becomes: []
// After 300ms: orderPizza.apply(null, [])  
// Which calls: orderPizza(undefined, undefined)

// ğŸ¯ The key insight: 
// JavaScript functions are flexible with arguments!
// Extra arguments are ignored, missing ones become undefined</code></pre>
            </div>
        </div>
        
        <div class="demo-section">
            <h3>ğŸ”„ How Closure Makes This Work</h3>
            <p>The debounce function uses <strong>closure</strong> - one of JavaScript's most powerful concepts:</p>
            
            <div class="code-example">
                <div class="code-header">
                    <span>ğŸ </span> Closure Explanation
                </div>
                <pre><code class="language-javascript">// ğŸ—ï¸ When we call debounce():
const debouncedCheck = debounce(checkKitchenIngredients, 300);

// ğŸ“‹ What happens internally:
// 1. debounce function creates a 'timeoutId' variable
// 2. debounce returns a NEW function: (...args) => { ... }
// 3. This NEW function "remembers" the timeoutId variable
// 4. This is called CLOSURE - inner function accessing outer variables

// ğŸ¯ Every time we call debouncedCheck():
debouncedCheck("pepperoni");  // 1st call
debouncedCheck("sausage");    // 2nd call  
debouncedCheck("mushroom");   // 3rd call

// ğŸ“ Each call:
// 1. Uses the SAME timeoutId variable (shared memory!)
// 2. Cancels previous timer: clearTimeout(timeoutId)
// 3. Sets new timer: timeoutId = setTimeout(...)
// 4. Only the LAST call (mushroom) actually executes after 300ms

// ğŸ  Closure = Inner function + Variables it can access
// It's like Tony having a persistent notepad that survives between orders!</code></pre>
            </div>
        </div>
        
        <div class="demo-section">
            <h3>ğŸ­ Real Example: Our Pizza Demo</h3>
            
            <div class="code-example">
                <div class="code-header">
                    <span>ğŸ•</span> Live Demo Code Analysis  
                </div>
                <pre><code class="language-javascript">// ğŸ“± In our demo, this is what happens:

// 1ï¸âƒ£ We define the original function (takes 1 argument)
function checkKitchenIngredients(orderText) {
    console.log(`ğŸ‘¨â€ğŸ³ Tony checks: "${orderText}"`);
    // Update UI, make API call, etc.
}

// 2ï¸âƒ£ We create debounced version
const debouncedKitchenCheck = debounce(checkKitchenIngredients, 300);

// 3ï¸âƒ£ User types "pepperoni" one letter at a time:
debouncedKitchenCheck("p");        // Timer starts: 300ms
debouncedKitchenCheck("pe");       // Previous timer cancelled, new: 300ms  
debouncedKitchenCheck("pep");      // Previous timer cancelled, new: 300ms
debouncedKitchenCheck("pepp");     // Previous timer cancelled, new: 300ms
debouncedKitchenCheck("peppe");    // Previous timer cancelled, new: 300ms
debouncedKitchenCheck("pepper");   // Previous timer cancelled, new: 300ms
debouncedKitchenCheck("peppero");  // Previous timer cancelled, new: 300ms
debouncedKitchenCheck("pepperon"); // Previous timer cancelled, new: 300ms
debouncedKitchenCheck("pepperoni");// Previous timer cancelled, new: 300ms
// User stops typing... 300ms later:
// checkKitchenIngredients("pepperoni") finally executes!

// ğŸ¯ Result: 9 keystrokes, but only 1 API call!
// Without debouncing: 9 API calls (one per keystroke)
// With debouncing: 1 API call (after user stops typing)</code></pre>
            </div>
        </div>
        
        <div class="demo-section">
            <h3>ğŸ§  Key Takeaways</h3>
            <div style="font-size: 1.1em; line-height: 1.8;">
                <p><strong>ğŸ¯ Debouncing Pattern:</strong> "Wait a moment before acting"</p>
                <p><strong>âš¡ Performance:</strong> Reduces API calls by 80-95%</p>
                <p><strong>ğŸ˜Š User Experience:</strong> Smoother, more responsive apps</p>
                <p><strong>ğŸ”§ Implementation:</strong> Simple but powerful utility function</p>
                <p><strong>ğŸŒ Universal:</strong> Works in any JavaScript environment</p>
                <p><strong>ğŸ  Closure:</strong> Inner function remembers outer variables</p>
                <p><strong>ğŸ Rest Parameters:</strong> ...args collects any number of arguments</p>
                <p><strong>âœ¨ Function.apply():</strong> Calls function with array of arguments</p>
            </div>
        </div>
    </div>

    <script>
        // Debounce utility function
        function debounce(func, delay) {
            let timeoutId;
            return (...args) => {
                clearTimeout(timeoutId);
                timeoutId = setTimeout(() => func.apply(null, args), delay);
            };
        }

        // Statistics tracking
        let totalKeystrokes = 0;
        let actualChecks = 0;
        let currentTimerId = null;

        // DOM elements
        const pizzaOrderInput = document.getElementById('pizzaOrder');
        const chef = document.getElementById('chef');
        const currentOrder = document.getElementById('currentOrder');
        const apiCounter = document.getElementById('apiCounter');
        const timerDisplay = document.getElementById('timerDisplay');
        const typingIndicator = document.getElementById('typingIndicator');

        // Kitchen check function (simulates API call)
        function checkKitchenIngredients(orderText) {
            actualChecks++;
            console.log(`ğŸ‘¨â€ğŸ³ Tony checks ingredients for: "${orderText}"`);
            
            // Update UI
            chef.classList.add('cooking');
            currentOrder.textContent = orderText || "No current order";
            apiCounter.textContent = actualChecks;
            
            // Show cooking animation briefly
            setTimeout(() => {
                chef.classList.remove('cooking');
            }, 500);
            
            // Update stats
            updateStats();
            
            // Hide typing indicator
            typingIndicator.classList.remove('show');
            timerDisplay.textContent = 'â±ï¸ Timer: Complete!';
            timerDisplay.classList.remove('active');
        }

        // Debounced version
        const debouncedKitchenCheck = debounce(checkKitchenIngredients, 300);

        // Timer display function
        function startTimer() {
            if (currentTimerId) {
                clearTimeout(currentTimerId);
            }
            
            timerDisplay.textContent = 'â±ï¸ Timer: 300ms counting...';
            timerDisplay.classList.add('active');
            
            currentTimerId = setTimeout(() => {
                timerDisplay.textContent = 'â±ï¸ Timer: Complete!';
                timerDisplay.classList.remove('active');
            }, 300);
        }

        // Event listener for pizza order input
        pizzaOrderInput.addEventListener('input', (e) => {
            totalKeystrokes++;
            const orderText = e.target.value.trim();
            
            // Show typing indicator if there's text
            if (orderText.length > 0) {
                typingIndicator.classList.add('show');
                startTimer();
            } else {
                typingIndicator.classList.remove('show');
                timerDisplay.textContent = 'â±ï¸ Timer: Ready';
                timerDisplay.classList.remove('active');
            }
            
            // This is debounced - only calls kitchen after 300ms pause
            debouncedKitchenCheck(orderText);
            
            // Update keystroke counter
            document.getElementById('totalKeystrokes').textContent = totalKeystrokes;
        });

        // Update statistics
        function updateStats() {
            const saved = totalKeystrokes - actualChecks;
            const efficiency = totalKeystrokes > 0 ? Math.round((saved / totalKeystrokes) * 100) : 0;
            
            document.getElementById('savedChecks').textContent = saved;
            document.getElementById('efficiency').textContent = efficiency + '%';
        }

        // Console helpers for learning
        console.log('ğŸ• Pizza Order Debouncing Demo Loaded!');
        console.log('ğŸ’¡ Try typing in the order input above');
        console.log('ğŸ”§ Available functions:');
        console.log('  - debounce(func, delay)');
        console.log('  - checkKitchenIngredients(order)');
        
        // Make debounce available globally for experimentation
        window.debounce = debounce;
        window.checkKitchenIngredients = checkKitchenIngredients;
    </script>
</body>
</html>